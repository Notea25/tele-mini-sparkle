# Управление майками команд

## Обзор

Система маек команд была обновлена для поддержки прямого управления через админ-панель бэкенда. Теперь URL маек хранятся в базе данных и возвращаются через API.

## Как это работает

### 1. Бэкенд

В модели `Team` добавлены два поля:
- `field_player_jersey` - URL майки полевого игрока
- `goalkeeper_jersey` - URL майки вратаря

Эти поля возвращаются через API в response команды.

### 2. Фронтенд

Функция `getJerseyForTeam()` теперь поддерживает два режима:

#### Новый режим (рекомендуется)
```typescript
import { getJerseyForTeam } from "@/hooks/getJerseyForTeam";

// Передать объект команды с данными из API
const jersey = getJerseyForTeam(team, player.position);
```

Где `team` - это объект типа:
```typescript
{
  name: string;
  name_rus: string;
  field_player_jersey?: string;
  goalkeeper_jersey?: string;
}
```

#### Старый режим (fallback)
```typescript
// Передать название команды как строку
const jersey = getJerseyForTeam("Динамо Минск", "ВР");
```

Если в объекте команды нет URL маек, функция автоматически использует старый маппинг по названию команды.

## Настройка маек через админку

### Шаг 1: Загрузите изображения маек
Загрузите изображения маек на CDN или хостинг (например, в assets проекта).

### Шаг 2: Откройте админ-панель
Перейдите в раздел **Teams** в админ-панели бэкенда.

### Шаг 3: Заполните поля
Для каждой команды укажите:
- **Field Player Jersey**: URL майки полевого игрока
- **Goalkeeper Jersey**: URL майки вратаря

Пример:
```
Field Player Jersey: https://example.com/jerseys/dinamo-minsk-field.png
Goalkeeper Jersey: https://example.com/jerseys/dinamo-minsk-gk.png
```

### Шаг 4: Сохраните
Нажмите "Save" для сохранения изменений.

## Миграция существующего кода

### До (старый подход):
```typescript
const jersey = getJerseyForTeam(player.team, player.position);
```

### После (новый подход):
```typescript
const jersey = getJerseyForTeam(
  {
    name: player.team,
    name_rus: player.team_rus,
    field_player_jersey: player.team_field_jersey,
    goalkeeper_jersey: player.team_gk_jersey
  }, 
  player.position
);
```

## Преимущества нового подхода

1. ✅ **Централизованное управление** - все майки настраиваются в одном месте через админку
2. ✅ **Нет hardcode** - не нужно изменять код для обновления маек
3. ✅ **Гибкость** - легко добавлять новые команды и обновлять майки
4. ✅ **Обратная совместимость** - старый маппинг работает как fallback
5. ✅ **Простота** - администраторы могут управлять майками без разработчиков

## Fallback логика

Функция `getJerseyForTeam` использует следующий приоритет:

1. **API данные** - если команда передана как объект и содержит `field_player_jersey`/`goalkeeper_jersey`
2. **Legacy маппинг** - если API данных нет, используется маппинг по `name_rus` или `name`
3. **Дефолтная майка** - если ничего не найдено, используется майка Славии

Это гарантирует, что майки всегда будут отображаться, даже если данные в админке еще не заполнены.

## Рекомендации

- Всегда заполняйте оба поля (полевого игрока и вратаря) для каждой команды
- Используйте качественные изображения маек в формате PNG с прозрачным фоном
- Храните изображения на быстром CDN для лучшей производительности
- После добавления новой команды, сразу укажите её майки через админку
